:80 {
  # API routes
  reverse_proxy /api/* backend:3001 {
  }
  
  # WebSocket service with proper WebSocket headers
  reverse_proxy /ws websocket:3002 {
    transport http {
      versions 1.1
    }
  }
  
  # Frontend (catch-all for SPA routing)
  reverse_proxy frontend:3000 {
  }

  # Enable compression
  encode gzip
}
