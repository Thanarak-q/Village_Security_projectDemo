"use strict";exports.id=986,exports.ids=[986],exports.modules={6211:(a,b,c)=>{c.d(b,{A0:()=>g,BF:()=>h,Hj:()=>i,XI:()=>f,nA:()=>k,nd:()=>j});var d=c(60687);c(43210);var e=c(4780);function f({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,d.jsx)("table",{"data-slot":"table",className:(0,e.cn)("w-full caption-bottom text-sm",a),...b})})}function g({className:a,...b}){return(0,d.jsx)("thead",{"data-slot":"table-header",className:(0,e.cn)("[&_tr]:border-b",a),...b})}function h({className:a,...b}){return(0,d.jsx)("tbody",{"data-slot":"table-body",className:(0,e.cn)("[&_tr:last-child]:border-0",a),...b})}function i({className:a,...b}){return(0,d.jsx)("tr",{"data-slot":"table-row",className:(0,e.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...b})}function j({className:a,...b}){return(0,d.jsx)("th",{"data-slot":"table-head",className:(0,e.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...b})}function k({className:a,...b}){return(0,d.jsx)("td",{"data-slot":"table-cell",className:(0,e.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...b})}},14952:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},15079:(a,b,c)=>{c.d(b,{bq:()=>l,eb:()=>n,gC:()=>m,l6:()=>j,yv:()=>k});var d=c(60687);c(43210);var e=c(99952),f=c(78272),g=c(13964),h=c(3589),i=c(4780);function j({...a}){return(0,d.jsx)(e.bL,{"data-slot":"select",...a})}function k({...a}){return(0,d.jsx)(e.WT,{"data-slot":"select-value",...a})}function l({className:a,size:b="default",children:c,...g}){return(0,d.jsxs)(e.l9,{"data-slot":"select-trigger","data-size":b,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...g,children:[c,(0,d.jsx)(e.In,{asChild:!0,children:(0,d.jsx)(f.A,{className:"size-4 opacity-50"})})]})}function m({className:a,children:b,position:c="popper",...f}){return(0,d.jsx)(e.ZL,{children:(0,d.jsxs)(e.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...f,children:[(0,d.jsx)(o,{}),(0,d.jsx)(e.LM,{className:(0,i.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:b}),(0,d.jsx)(p,{})]})})}function n({className:a,children:b,...c}){return(0,d.jsxs)(e.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...c,children:[(0,d.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,d.jsx)(e.VF,{children:(0,d.jsx)(g.A,{className:"size-4"})})}),(0,d.jsx)(e.p4,{children:b})]})}function o({className:a,...b}){return(0,d.jsx)(e.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(h.A,{className:"size-4"})})}function p({className:a,...b}){return(0,d.jsx)(e.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(f.A,{className:"size-4"})})}},34729:(a,b,c)=>{c.d(b,{T:()=>f});var d=c(60687);c(43210);var e=c(4780);function f({className:a,...b}){return(0,d.jsx)("textarea",{"data-slot":"textarea",className:(0,e.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}},47033:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},51986:(a,b,c)=>{c.r(b),c.d(b,{default:()=>ad});var d=c(60687),e=c(43210),f=c(29523),g=c(96834),h=c(6211);let i=(0,c(62688).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var j=c(99270),k=c(84027),l=c(47033),m=c(14952),n=c(63503),o=c(11273),p=c(98599),q=c(26134),r=c(70569),s=c(8730),t="AlertDialog",[u,v]=(0,o.A)(t,[q.Hs]),w=(0,q.Hs)(),x=a=>{let{__scopeAlertDialog:b,...c}=a,e=w(b);return(0,d.jsx)(q.bL,{...e,...c,modal:!0})};x.displayName=t,e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=w(c);return(0,d.jsx)(q.l9,{...f,...e,ref:b})}).displayName="AlertDialogTrigger";var y=a=>{let{__scopeAlertDialog:b,...c}=a,e=w(b);return(0,d.jsx)(q.ZL,{...e,...c})};y.displayName="AlertDialogPortal";var z=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=w(c);return(0,d.jsx)(q.hJ,{...f,...e,ref:b})});z.displayName="AlertDialogOverlay";var A="AlertDialogContent",[B,C]=u(A),D=(0,s.Dc)("AlertDialogContent"),E=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,children:f,...g}=a,h=w(c),i=e.useRef(null),j=(0,p.s)(b,i),k=e.useRef(null);return(0,d.jsx)(q.G$,{contentName:A,titleName:F,docsSlug:"alert-dialog",children:(0,d.jsx)(B,{scope:c,cancelRef:k,children:(0,d.jsxs)(q.UC,{role:"alertdialog",...h,...g,ref:j,onOpenAutoFocus:(0,r.mK)(g.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,d.jsx)(D,{children:f}),(0,d.jsx)(M,{contentRef:i})]})})})});E.displayName=A;var F="AlertDialogTitle",G=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=w(c);return(0,d.jsx)(q.hE,{...f,...e,ref:b})});G.displayName=F;var H="AlertDialogDescription",I=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=w(c);return(0,d.jsx)(q.VY,{...f,...e,ref:b})});I.displayName=H;var J=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,f=w(c);return(0,d.jsx)(q.bm,{...f,...e,ref:b})});J.displayName="AlertDialogAction";var K="AlertDialogCancel",L=e.forwardRef((a,b)=>{let{__scopeAlertDialog:c,...e}=a,{cancelRef:f}=C(K,c),g=w(c),h=(0,p.s)(b,f);return(0,d.jsx)(q.bm,{...g,...e,ref:h})});L.displayName=K;var M=({contentRef:a})=>{let b=`\`${A}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${A}\` by passing a \`${H}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${A}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return e.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))},[b,a]),null},N=c(4780);function O({...a}){return(0,d.jsx)(x,{"data-slot":"alert-dialog",...a})}function P({...a}){return(0,d.jsx)(y,{"data-slot":"alert-dialog-portal",...a})}function Q({className:a,...b}){return(0,d.jsx)(z,{"data-slot":"alert-dialog-overlay",className:(0,N.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function R({className:a,...b}){return(0,d.jsxs)(P,{children:[(0,d.jsx)(Q,{}),(0,d.jsx)(E,{"data-slot":"alert-dialog-content",className:(0,N.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...b})]})}function S({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,N.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function T({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,N.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function U({className:a,...b}){return(0,d.jsx)(G,{"data-slot":"alert-dialog-title",className:(0,N.cn)("text-lg font-semibold",a),...b})}function V({className:a,...b}){return(0,d.jsx)(I,{"data-slot":"alert-dialog-description",className:(0,N.cn)("text-muted-foreground text-sm",a),...b})}function W({className:a,...b}){return(0,d.jsx)(J,{className:(0,N.cn)((0,f.r)(),a),...b})}function X({className:a,...b}){return(0,d.jsx)(L,{className:(0,N.cn)((0,f.r)({variant:"outline"}),a),...b})}var Y=c(89667),Z=c(34729),$=c(15079),_=c(93508),aa=c(11860),ab=c(13964);function ac({user:a,isOpen:b,onClose:c,onSubmit:g}){let[h,i]=(0,e.useState)({approvedRole:"",houseNumber:"",notes:""}),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),o=()=>{k(!1),m(!1)};return a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.lG,{open:b,onOpenChange:c,children:(0,d.jsxs)(n.Cf,{className:"sm:max-w-lg max-w-[95vw] max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)(n.c7,{children:(0,d.jsxs)(n.L3,{className:"text-xl font-semibold flex items-center gap-2",children:[(0,d.jsx)(_.A,{className:"h-5 w-5 text-blue-500"}),"อนุมัติผู้ใช้ใหม่"]})}),(0,d.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6 border border-blue-200",children:[(0,d.jsx)("h3",{className:"font-medium text-blue-900 mb-3",children:"ข้อมูลผู้สมัคร"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"ชื่อ-นามสกุล:"}),(0,d.jsxs)("p",{className:"text-blue-900",children:[a.fname," ",a.lname]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"Username:"}),(0,d.jsxs)("p",{className:"text-blue-900",children:["@",a.username]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"อีเมล:"}),(0,d.jsx)("p",{className:"text-blue-900",children:a.email})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"เบอร์โทร:"}),(0,d.jsx)("p",{className:"text-blue-900",children:a.phone})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"วันที่สมัคร:"}),(0,d.jsx)("p",{className:"text-blue-900",children:new Date(a.requestDate).toLocaleDateString("th-TH")})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{className:"text-blue-700 font-medium",children:"บทบาทที่สมัคร:"}),(0,d.jsx)("p",{className:"text-blue-900",children:"resident"===a.role?"ลูกบ้าน":"ยาม"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"บทบาทที่อนุมัติ"}),(0,d.jsxs)($.l6,{value:h.approvedRole,onValueChange:a=>i({...h,approvedRole:a}),children:[(0,d.jsx)($.bq,{children:(0,d.jsx)($.yv,{placeholder:"เลือกบทบาท"})}),(0,d.jsxs)($.gC,{children:[(0,d.jsx)($.eb,{value:"ลูกบ้าน",children:"ลูกบ้าน"}),(0,d.jsx)($.eb,{value:"ยาม",children:"ยาม"})]})]})]}),"ลูกบ้าน"===h.approvedRole&&(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"บ้านเลขที่"}),(0,d.jsx)(Y.p,{placeholder:"เช่น 88/123",value:h.houseNumber,onChange:a=>i({...h,houseNumber:a.target.value})}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"กรอกบ้านเลขที่สำหรับลูกบ้าน"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"หมายเหตุ (ไม่บังคับ)"}),(0,d.jsx)(Z.T,{placeholder:"เพิ่มหมายเหตุหรือข้อมูลเพิ่มเติม...",value:h.notes,onChange:a=>i({...h,notes:a.target.value}),rows:3})]})]}),(0,d.jsxs)(n.Es,{className:"flex gap-3 pt-6",children:[(0,d.jsxs)(f.$,{type:"button",variant:"outline",className:"flex-1 border-red-300 text-red-700 hover:bg-red-50",onClick:()=>{a&&m(!0)},children:[(0,d.jsx)(aa.A,{className:"w-4 h-4 mr-2"}),"ปฏิเสธ"]}),(0,d.jsxs)(f.$,{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700 text-white",onClick:()=>{if(a){if("ลูกบ้าน"===h.approvedRole&&!h.houseNumber.trim())return void alert("กรุณาระบุบ้านเลขที่สำหรับลูกบ้าน");k(!0)}},children:[(0,d.jsx)(ab.A,{className:"w-4 h-4 mr-2"}),"อนุมัติ"]})]})]})}),(0,d.jsx)(O,{open:j,onOpenChange:k,children:(0,d.jsxs)(R,{className:"flex flex-col w-100",children:[(0,d.jsxs)(S,{children:[(0,d.jsxs)(U,{className:"flex items-center gap-2",children:[(0,d.jsx)(ab.A,{className:"h-5 w-5 text-green-600"}),"ยืนยันการอนุมัติ"]}),(0,d.jsxs)(V,{children:["คุณต้องการอนุมัติผู้ใช้ ",(0,d.jsxs)("strong",{children:[a?.fname," ",a?.lname]}),"เป็น ",(0,d.jsx)("strong",{children:h.approvedRole})," ใช่หรือไม่?","ลูกบ้าน"===h.approvedRole&&h.houseNumber&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),"บ้านเลขที่: ",(0,d.jsx)("strong",{children:h.houseNumber})]})]})]}),(0,d.jsxs)(T,{children:[(0,d.jsx)(X,{onClick:o,children:"ยกเลิก"}),(0,d.jsx)(W,{onClick:()=>{k(!1),g("approve",h)},className:"bg-green-600 hover:bg-green-700",children:"ยืนยันการอนุมัติ"})]})]})}),(0,d.jsx)(O,{open:l,onOpenChange:m,children:(0,d.jsxs)(R,{className:"flex flex-col w-100",children:[(0,d.jsxs)(S,{children:[(0,d.jsxs)(U,{className:"flex items-center gap-2",children:[(0,d.jsx)(aa.A,{className:"h-5 w-5 text-red-600"}),"ยืนยันการปฏิเสธ"]}),(0,d.jsxs)(V,{children:["คุณต้องการปฏิเสธผู้ใช้ ",(0,d.jsxs)("strong",{children:[a?.fname," ",a?.lname]})," ใช่หรือไม่?",(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"text-red-600 font-medium",children:"การปฏิเสธจะทำให้ผู้ใช้ไม่สามารถเข้าสู่ระบบได้"})]})]}),(0,d.jsxs)(T,{children:[(0,d.jsx)(X,{onClick:o,children:"ยกเลิก"}),(0,d.jsx)(W,{onClick:()=>{m(!1),g("reject",h)},className:"bg-red-600 hover:bg-red-700",children:"ยืนยันการปฏิเสธ"})]})]})})]}):null}function ad(){let[a,b]=(0,e.useState)([]),[c,n]=(0,e.useState)([]),[o,p]=(0,e.useState)(!0),[q,r]=(0,e.useState)(null),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(1),[y,z]=(0,e.useState)(()=>2),[A,B]=(0,e.useState)(""),[C,D]=(0,e.useState)(!1),E=async(a=!1)=>{try{a?D(!0):p(!0),r(null);let c=await fetch("/api/pendingUsers");if(!c.ok)throw Error(`HTTP error! status: ${c.status}`);let d=await c.json();if(d.success)b(d.data.residents),n(d.data.guards);else throw Error(d.error||"Failed to fetch pending users")}catch(a){r(a instanceof Error?a.message:"An error occurred")}finally{p(!1),D(!1)}},F=async(a,b)=>{if(s)try{let c;c="approve"===a?await fetch("/api/approveUser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,currentRole:s.role,approvedRole:"ลูกบ้าน"===b.approvedRole?"resident":"guard",houseNumber:"ลูกบ้าน"===b.approvedRole?b.houseNumber:void 0,notes:b.notes})}):await fetch("/api/rejectUser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.id,currentRole:s.role,reason:"Rejected by administrator",notes:b.notes})});let d=await c.json();d.success?(await E(!0),v(!1),t(null)):alert(`Failed to ${a} user: ${d.error}`)}catch(b){alert(`An error occurred while ${a}ing the user`)}},G=a=>({id:a.id,username:a.email.split("@")[0],email:a.email,fname:a.fname,lname:a.lname,phone:a.phone,role:a.role,houseNumber:a.house_address||"-",requestDate:a.createdAt,status:a.status,profile_image_url:a.profile_image_url}),H=[...a.map(G),...c.map(G)],I=H.filter(a=>a.fname.toLowerCase().includes(A.toLowerCase())||a.lname.toLowerCase().includes(A.toLowerCase())||a.email.toLowerCase().includes(A.toLowerCase())||a.status.toLowerCase().includes(A.toLowerCase())||a.houseNumber.includes(A)),J=I.length,K=Math.ceil(J/y),L=(w-1)*y,M=L+y,N=I.slice(L,M);return o?(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,d.jsx)("p",{className:"mt-2 text-muted-foreground",children:"กำลังโหลดข้อมูล..."})]})}):q?(0,d.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-red-500 text-xl mb-2",children:"⚠️"}),(0,d.jsxs)("p",{className:"text-red-600",children:["เกิดข้อผิดพลาด: ",q]}),(0,d.jsx)("button",{onClick:()=>E(),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"ลองใหม่"})]})}):(0,d.jsxs)("div",{className:"bg-background rounded-lg shadow-sm border",children:[(0,d.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(i,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-500"}),(0,d.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-foreground",children:"ผู้ใช้ใหม่รออนุมัติ"}),(0,d.jsxs)(g.E,{variant:"secondary",className:"bg-orange-100 text-orange-800 text-xs sm:text-sm",children:[H.length," รายการ"]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[(0,d.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,d.jsx)(j.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,d.jsx)("input",{type:"text",placeholder:"ค้นหาผู้ใช้...",value:A,onChange:a=>B(a.target.value),className:"pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-ring focus:border-transparent w-full sm:w-64 text-sm"})]}),(0,d.jsx)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-2",children:C&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-blue-600",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),(0,d.jsx)("span",{children:"กำลังอัปเดต..."})]})})]})]})}),(0,d.jsx)("div",{className:"overflow-x-auto rounded-lg border border-border bg-background shadow-sm hover:shadow-md transition-shadow duration-200",children:(0,d.jsxs)(h.XI,{children:[(0,d.jsx)(h.A0,{children:(0,d.jsxs)(h.Hj,{className:"bg-muted/50 border-b border-border",children:[(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6",children:"ผู้สมัคร"}),(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6 hidden sm:table-cell",children:"ข้อมูลติดต่อ"}),(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6",children:"บทบาท"}),(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6 hidden md:table-cell",children:"บ้านเลขที่"}),(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6 hidden lg:table-cell",children:"วันที่สมัคร"}),(0,d.jsx)(h.nd,{className:"text-muted-foreground font-semibold text-sm py-4 px-6",children:"การดำเนินการ"})]})}),(0,d.jsx)(h.BF,{children:N.map(a=>{let b,c;return(0,d.jsxs)(h.Hj,{className:"hover:bg-muted/30 transition-colors border-b border-border/50",children:[(0,d.jsx)(h.nA,{className:"py-4 px-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center text-white font-semibold text-sm shadow-sm ${(a=>{let b=["bg-blue-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-red-500","bg-indigo-500"],c=a.charCodeAt(0)%b.length;return b[c]})(a.id)}`,children:(b=a.fname,c=a.lname,`${b.charAt(0)}${c.charAt(0)}`.toUpperCase())}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsxs)("div",{className:"font-semibold text-foreground text-base",children:[a.fname," ",a.lname]}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:["@",a.username]}),(0,d.jsxs)("div",{className:"sm:hidden text-xs text-muted-foreground mt-1 space-y-1",children:[(0,d.jsx)("div",{children:a.email}),(0,d.jsx)("div",{children:a.phone})]})]})]})}),(0,d.jsx)(h.nA,{className:"hidden sm:table-cell",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"text-sm text-foreground",children:a.email}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:a.phone})]})}),(0,d.jsx)(h.nA,{children:(0,d.jsx)(g.E,{variant:"outline",className:`text-xs sm:text-sm ${"guard"===a.role?"border-blue-200 text-blue-700 bg-blue-50":"border-green-200 text-green-700 bg-green-50"}`,children:"guard"===a.role?"ยาม":"ลูกบ้าน"})}),(0,d.jsx)(h.nA,{className:"text-gray-700 hidden md:table-cell text-sm",children:"-"!==a.houseNumber?a.houseNumber:"-"}),(0,d.jsx)(h.nA,{className:"text-muted-foreground hidden lg:table-cell text-sm",children:new Date(a.requestDate).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"})}),(0,d.jsx)(h.nA,{children:(0,d.jsxs)(f.$,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm",onClick:()=>{t(a),v(!0)},children:[(0,d.jsx)(k.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"ดำเนินการ"}),(0,d.jsx)("span",{className:"sm:hidden",children:"จัดการ"})]})})]},a.id)})})]})}),0===I.length&&(0,d.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,d.jsx)(i,{className:"h-8 w-8 sm:h-12 sm:w-12 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-base sm:text-lg font-medium text-foreground mb-2",children:A?"ไม่พบข้อมูลที่ค้นหา":"ไม่มีผู้ใช้ใหม่รออนุมัติ"}),(0,d.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:A?"ลองค้นหาด้วยคำอื่น":"ผู้ใช้ใหม่ที่สมัครเข้ามาจะปรากฏที่นี่"})]}),J>0&&(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between px-4 sm:px-6 py-4 border-t bg-muted gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"แสดง"}),(0,d.jsxs)($.l6,{value:y.toString(),onValueChange:a=>{z(Number(a)),x(1)},children:[(0,d.jsx)($.bq,{className:"w-16 sm:w-20 text-xs sm:text-sm",children:(0,d.jsx)($.yv,{})}),(0,d.jsxs)($.gC,{children:[(0,d.jsx)($.eb,{value:"2",children:"2"}),(0,d.jsx)($.eb,{value:"3",children:"3"}),(0,d.jsx)($.eb,{value:"5",children:"5"}),(0,d.jsx)($.eb,{value:"10",children:"10"})]})]}),(0,d.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"รายการต่อหน้า"})]}),(0,d.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["แสดง ",L+1," ถึง ",Math.min(M,J)," จาก ",J," รายการ"]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>{w>1&&x(w-1)},disabled:1===w,className:"flex items-center text-xs sm:text-sm",children:[(0,d.jsx)(l.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"ก่อนหน้า"}),(0,d.jsx)("span",{className:"sm:hidden",children:"ก่อน"})]}),(0,d.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(K,5)},(a,b)=>{let c;return c=K<=5||w<=3?b+1:w>=K-2?K-4+b:w-2+b,(0,d.jsx)(f.$,{variant:w===c?"default":"outline",size:"sm",onClick:()=>x(c),className:`w-6 h-6 sm:w-8 sm:h-8 p-0 text-xs sm:text-sm ${w===c?"bg-blue-600 text-white":"text-muted-foreground hover:bg-gray-100"}`,children:c},c)})}),(0,d.jsxs)(f.$,{variant:"outline",size:"sm",onClick:()=>{w<K&&x(w+1)},disabled:w===K,className:"flex items-center text-xs sm:text-sm",children:[(0,d.jsx)("span",{className:"hidden sm:inline",children:"ถัดไป"}),(0,d.jsx)("span",{className:"sm:hidden",children:"ถัด"}),(0,d.jsx)(m.A,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1"})]})]})]}),(0,d.jsx)(ac,{user:s,isOpen:u,onClose:()=>{v(!1),t(null)},onSubmit:F})]})}},63503:(a,b,c)=>{c.d(b,{Cf:()=>m,Es:()=>o,HM:()=>k,L3:()=>p,c7:()=>n,lG:()=>h,zM:()=>i});var d=c(60687);c(43210);var e=c(26134),f=c(11860),g=c(4780);function h({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dialog",...a})}function i({...a}){return(0,d.jsx)(e.l9,{"data-slot":"dialog-trigger",...a})}function j({...a}){return(0,d.jsx)(e.ZL,{"data-slot":"dialog-portal",...a})}function k({...a}){return(0,d.jsx)(e.bm,{"data-slot":"dialog-close",...a})}function l({className:a,...b}){return(0,d.jsx)(e.hJ,{"data-slot":"dialog-overlay",className:(0,g.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function m({className:a,children:b,showCloseButton:c=!0,...h}){return(0,d.jsxs)(j,{"data-slot":"dialog-portal",children:[(0,d.jsx)(l,{}),(0,d.jsxs)(e.UC,{"data-slot":"dialog-content",className:(0,g.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...h,children:[b,c&&(0,d.jsxs)(e.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,d.jsx)(f.A,{}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function n({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-header",className:(0,g.cn)("flex flex-col gap-2 text-center sm:text-left",a),...b})}function o({className:a,...b}){return(0,d.jsx)("div",{"data-slot":"dialog-footer",className:(0,g.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...b})}function p({className:a,...b}){return(0,d.jsx)(e.hE,{"data-slot":"dialog-title",className:(0,g.cn)("text-lg leading-none font-semibold",a),...b})}},99270:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}};