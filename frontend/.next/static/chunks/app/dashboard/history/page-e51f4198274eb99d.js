(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{13052:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(12115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:m,...x}=e;return(0,r.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:d?24*Number(l)/Number(a):l,className:n("lucide",o),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),d=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:d,...o}=s;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...o})});return s.displayName=a(e),s}},26126:(e,t,s)=>{"use strict";s.d(t,{E:()=>d});var r=s(95155);s(12115);var a=s(99708),n=s(74466),i=s(59434);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:s,asChild:n=!1,...d}=e,o=n?a.DX:"span";return(0,r.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),t),...d})}},30285:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,r:()=>l});var r=s(95155);s(12115);var a=s(99708),n=s(74466),i=s(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:s,size:n,asChild:d=!1,...o}=e,c=d?a.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...o})}},42355:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},47924:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},57930:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]])},59409:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>u,gC:()=>x,l6:()=>o,yv:()=>c});var r=s(95155);s(12115);var a=s(50083),n=s(66474),i=s(5196),l=s(47863),d=s(59434);function o(e){let{...t}=e;return(0,r.jsx)(a.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,r.jsx)(a.WT,{"data-slot":"select-value",...t})}function m(e){let{className:t,size:s="default",children:i,...l}=e;return(0,r.jsxs)(a.l9,{"data-slot":"select-trigger","data-size":s,className:(0,d.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,r.jsx)(a.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function x(e){let{className:t,children:s,position:n="popper",...i}=e;return(0,r.jsx)(a.ZL,{children:(0,r.jsxs)(a.UC,{"data-slot":"select-content",className:(0,d.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,r.jsx)(h,{}),(0,r.jsx)(a.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,r.jsx)(p,{})]})})}function u(e){let{className:t,children:s,...n}=e;return(0,r.jsxs)(a.q7,{"data-slot":"select-item",className:(0,d.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(a.VF,{children:(0,r.jsx)(i.A,{className:"size-4"})})}),(0,r.jsx)(a.p4,{children:s})]})}function h(e){let{className:t,...s}=e;return(0,r.jsx)(a.PP,{"data-slot":"select-scroll-up-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(l.A,{className:"size-4"})})}function p(e){let{className:t,...s}=e;return(0,r.jsx)(a.wn,{"data-slot":"select-scroll-down-button",className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(n.A,{className:"size-4"})})}},59434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(52596),a=s(39688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},75525:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(19946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},77690:(e,t,s)=>{Promise.resolve().then(s.bind(s,79316))},79316:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(95155),a=s(12115),n=s(50802),i=s(30285),l=s(26126),d=s(85127),o=s(59409),c=s(75525),m=s(57930),x=s(47924),u=s(14186),h=s(42355),p=s(13052);function g(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)([]),[g,f]=(0,a.useState)(!0),[v,b]=(0,a.useState)(null),[j,w]=(0,a.useState)("adminHistory"),[y,N]=(0,a.useState)(""),[_,k]=(0,a.useState)(1),[A,C]=(0,a.useState)(()=>{if(window.localStorage){let e=localStorage.getItem("historyTable_itemsPerPage");return e?parseInt(e,10):5}return 5}),[z,L]=(0,a.useState)(!1),H=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?L(!0):f(!0),b(null);let s=await fetch("/api/visitor-records");if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(r.success){let e=r.data.map(e=>({id:e.visitor_record_id,license_plate:e.license_plate,entry_time:e.entry_time,record_status:e.record_status,visit_purpose:e.visit_purpose,resident_name:e.resident_name,resident_email:e.resident_email,guard_name:e.guard_name,guard_email:e.guard_email,house_address:e.house_address,picture_key:e.picture_key}));n(e)}else throw Error("Failed to fetch visitor records");t([{id:"1",name:"สมชาย ใจดี",action:"แก้ไขข้อมูลผู้ใช้",note:"อัปเดตข้อมูลบ้านเลขที่",timestamp:"2024-01-15T10:30:00Z",user_role:"admin",user_email:"somchai@example.com"},{id:"2",name:"สมหญิง รักดี",action:"เพิ่มผู้ใช้ใหม่",note:"เพิ่มยามใหม่เข้าสู่ระบบ",timestamp:"2024-01-14T14:20:00Z",user_role:"admin",user_email:"somying@example.com"},{id:"3",name:"สมศักดิ์ มั่นคง",action:"ลบผู้ใช้",note:"ลบผู้ใช้ที่หมดอายุ",timestamp:"2024-01-13T09:15:00Z",user_role:"admin",user_email:"somsak@example.com"}])}catch(e){b(e instanceof Error?e.message:"An error occurred")}finally{f(!1),L(!1)}};(0,a.useEffect)(()=>{H()},[]);let S=e=>new Date(e).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())||e.action.toLowerCase().includes(y.toLowerCase())||e.note.toLowerCase().includes(y.toLowerCase())||e.user_email.toLowerCase().includes(y.toLowerCase())),T=s.filter(e=>e.resident_name.toLowerCase().includes(y.toLowerCase())||e.guard_name.toLowerCase().includes(y.toLowerCase())||e.visit_purpose.toLowerCase().includes(y.toLowerCase())||e.record_status.toLowerCase().includes(y.toLowerCase())),P="adminHistory"===j?E.length:T.length,M=Math.ceil(P/A);return((0,a.useEffect)(()=>{k(1)},[j,y]),g)?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-muted-foreground",children:"กำลังโหลดข้อมูล..."})]})}):v?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-xl mb-2",children:"⚠️"}),(0,r.jsxs)("p",{className:"text-red-600",children:["เกิดข้อผิดพลาด: ",v]}),(0,r.jsx)("button",{onClick:()=>H(),className:"mt-2 px-4 py-2 bg-primary text-white rounded hover:bg-primary/90",children:"ลองใหม่"})]})}):(0,r.jsx)("div",{className:"space-y-4 sm:space-y-6",children:(0,r.jsxs)("div",{className:"bg-background rounded-lg shadow-sm border border-border p-4 sm:p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between mb-6 gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[(0,r.jsxs)("button",{onClick:()=>w("adminHistory"),className:"flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors text-sm sm:text-base ".concat("adminHistory"===j?"bg-primary/10 text-primary border border-primary/20":"text-muted-foreground hover:bg-muted"),children:[(0,r.jsx)(c.A,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,r.jsxs)("span",{children:["ประวัติผู้ดูแล (",e.length,")"]})]}),(0,r.jsxs)("button",{onClick:()=>w("visitorHistory"),className:"flex items-center space-x-2 px-4 py-3 rounded-lg font-medium transition-colors text-sm sm:text-base ".concat("visitorHistory"===j?"bg-green-100 text-green-700 border border-green-200":"text-muted-foreground hover:bg-muted"),children:[(0,r.jsx)(m.A,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,r.jsxs)("span",{children:["ประวัติผู้เยี่ยม (",s.length,")"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 w-full lg:w-auto",children:[(0,r.jsxs)("div",{className:"relative w-full sm:max-w-md",children:[(0,r.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"ค้นหาประวัติ...",value:y,onChange:e=>N(e.target.value),className:"pl-10 pr-4 py-2 border border-border rounded-lg focus:ring-2 focus:ring-ring focus:border-transparent w-full text-sm"})]}),z&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 text-sm w-full sm:w-auto justify-center sm:justify-start",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600"}),(0,r.jsx)("span",{children:"กำลังอัปเดต..."})]})]})]}),"adminHistory"===j&&(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:(0,r.jsxs)(d.Hj,{className:"bg-muted/50 border-b border-border",children:[(0,r.jsx)(d.nd,{className:"text-muted-foreground font-semibold text-sm min-w-[200px] py-4 px-6",children:"ผู้ดำเนินการ"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-semibold text-sm hidden sm:table-cell min-w-[150px] py-4 px-6",children:"การดำเนินการ"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-semibold text-sm hidden md:table-cell min-w-[120px] py-4 px-6",children:"หมายเหตุ"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-semibold text-sm hidden lg:table-cell min-w-[140px] py-4 px-6",children:"วันที่ดำเนินการ"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-semibold text-sm min-w-[80px] py-4 px-6",children:"สถานะ"})]})}),(0,r.jsx)(d.BF,{children:(()=>{let e=(_-1)*A,t=e+A;return E.slice(e,t).map(e=>({...e,type:"admin",status:"completed"}))})().map(e=>(0,r.jsxs)(d.Hj,{className:"hover:bg-muted/30 transition-colors border-b border-border/50",children:[(0,r.jsx)(d.nA,{className:"min-w-[200px] py-4 px-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0 shadow-sm ".concat((e=>{let t=["bg-blue-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-red-500","bg-indigo-500"],s=e.charCodeAt(0)%t.length;return t[s]})(e.id)),children:e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase()}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"font-semibold text-foreground text-base truncate",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground truncate",children:e.user_email}),(0,r.jsxs)("div",{className:"sm:hidden text-xs text-muted-foreground mt-1 space-y-1",children:[(0,r.jsx)("div",{className:"truncate",children:e.action}),(0,r.jsx)("div",{className:"truncate",children:e.note})]})]})]})}),(0,r.jsx)(d.nA,{className:"hidden sm:table-cell min-w-[150px]",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-sm text-foreground truncate",children:e.action}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground truncate",children:e.note})]})}),(0,r.jsx)(d.nA,{className:"text-gray-700 hidden md:table-cell text-sm min-w-[120px]",children:(0,r.jsx)("div",{className:"truncate",children:e.note})}),(0,r.jsx)(d.nA,{className:"text-muted-foreground hidden lg:table-cell text-sm min-w-[140px]",children:S(e.timestamp)}),(0,r.jsx)(d.nA,{className:"min-w-[80px]",children:(0,r.jsx)(l.E,{variant:"default",className:"text-xs sm:text-sm bg-green-100 text-green-800 hover:bg-green-100",children:"เสร็จสิ้น"})})]},e.id))})]})}),"visitorHistory"===j&&(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:(0,r.jsxs)(d.Hj,{className:"bg-muted",children:[(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm min-w-[200px]",children:"ข้อมูลผู้เข้าเยี่ยม"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm hidden sm:table-cell min-w-[120px]",children:"ชื่อผู้อยู่อาศัย"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm hidden sm:table-cell min-w-[120px]",children:"วัตถุประสงค์"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm hidden md:table-cell min-w-[150px]",children:"บ้านที่เยี่ยม"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm hidden lg:table-cell min-w-[140px]",children:"เวลาที่เข้า"}),(0,r.jsx)(d.nd,{className:"text-muted-foreground font-medium text-xs sm:text-sm min-w-[80px]",children:"สถานะ"})]})}),(0,r.jsx)(d.BF,{children:(()=>{let e=(_-1)*A,t=e+A;return T.slice(e,t).map(e=>({...e,type:"visitor",status:e.record_status}))})().map(e=>(0,r.jsxs)(d.Hj,{className:"hover:bg-muted",children:[(0,r.jsx)(d.nA,{className:"min-w-[200px]",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center text-white font-medium text-xs sm:text-sm bg-blue-500 flex-shrink-0",children:(0,r.jsx)(m.A,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsx)("div",{className:"font-medium text-foreground text-sm sm:text-base truncate",children:e.license_plate}),(0,r.jsxs)("div",{className:"sm:hidden text-xs text-muted-foreground mt-1",children:[(0,r.jsx)("div",{className:"truncate",children:e.visit_purpose}),(0,r.jsxs)("div",{className:"truncate",children:["บ้าน: ",e.house_address]})]})]})]})}),(0,r.jsx)(d.nA,{className:"hidden sm:table-cell min-w-[120px]",children:(0,r.jsx)("div",{className:"text-sm text-foreground truncate",children:e.resident_name})}),(0,r.jsx)(d.nA,{className:"hidden sm:table-cell min-w-[120px]",children:(0,r.jsx)("div",{className:"text-sm text-foreground truncate",children:e.visit_purpose})}),(0,r.jsx)(d.nA,{className:"text-gray-700 hidden md:table-cell text-sm min-w-[150px]",children:(0,r.jsx)("div",{className:"truncate",children:e.house_address})}),(0,r.jsx)(d.nA,{className:"text-muted-foreground hidden lg:table-cell text-sm min-w-[140px]",children:S(e.entry_time)}),(0,r.jsx)(d.nA,{className:"min-w-[80px]",children:(0,r.jsx)(l.E,{variant:"completed"===e.status?"default":"secondary",className:"text-xs sm:text-sm ".concat("completed"===e.status?"bg-green-100 text-green-800 hover:bg-green-100":"in_progress"===e.status?"bg-yellow-100 text-yellow-800 hover:bg-yellow-100":"bg-gray-100 text-gray-800 hover:bg-gray-100"),children:"completed"===e.status?"เสร็จสิ้น":"in_progress"===e.status?"กำลังดำเนินการ":e.status})})]},e.id))})]})}),("adminHistory"===j&&0===E.length||"visitorHistory"===j&&0===T.length)&&(0,r.jsxs)("div",{className:"p-8 sm:p-12 text-center",children:[(0,r.jsx)(u.A,{className:"h-8 w-8 sm:h-12 sm:w-12 text-muted-foreground mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-base sm:text-lg font-medium text-foreground mb-2",children:"ไม่พบข้อมูลประวัติ"}),(0,r.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:y?"ลองค้นหาด้วยคำอื่น":"ยังไม่มีข้อมูลประวัติในหมวดหมู่นี้"})]}),P>0&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between px-3 sm:px-4 lg:px-6 py-4 border-t bg-muted gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4 w-full sm:w-auto",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"แสดง"}),(0,r.jsxs)(o.l6,{value:A.toString(),onValueChange:e=>{let t=Number(e);C(t),k(1),window.localStorage&&localStorage.setItem("historyTable_itemsPerPage",t.toString())},children:[(0,r.jsx)(o.bq,{className:"w-16 sm:w-20 text-xs sm:text-sm",children:(0,r.jsx)(o.yv,{})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"3",children:"3"}),(0,r.jsx)(o.eb,{value:"5",children:"5"}),(0,r.jsx)(o.eb,{value:"10",children:"10"}),(0,r.jsx)(o.eb,{value:"20",children:"20"})]})]}),(0,r.jsx)("span",{className:"text-xs sm:text-sm text-muted-foreground",children:"รายการต่อหน้า"})]}),(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["แสดง ",(_-1)*A+1," ถึง ",Math.min(_*A,P)," จาก ",P," รายการ"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 w-full sm:w-auto justify-center sm:justify-end",children:[(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{_>1&&k(_-1)},disabled:1===_,className:"flex items-center text-xs sm:text-sm",children:[(0,r.jsx)(h.A,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"ก่อนหน้า"}),(0,r.jsx)("span",{className:"sm:hidden",children:"ก่อน"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(M,5)},(e,t)=>{let s;return s=M<=5||_<=3?t+1:_>=M-2?M-4+t:_-2+t,(0,r.jsx)(i.$,{variant:_===s?"default":"outline",size:"sm",onClick:()=>k(s),className:"w-6 h-6 sm:w-8 sm:h-8 p-0 text-xs sm:text-sm ".concat(_===s?"bg-blue-600 text-white":"text-muted-foreground hover:bg-gray-100"),children:s},s)})}),(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{_<M&&k(_+1)},disabled:_===M,className:"flex items-center text-xs sm:text-sm",children:[(0,r.jsx)("span",{className:"hidden sm:inline",children:"ถัดไป"}),(0,r.jsx)("span",{className:"sm:hidden",children:"ถัด"}),(0,r.jsx)(p.A,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-1"})]})]})]})]})})}function f(){let e=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=e.current;return n.os.set(t,{opacity:0,y:50}),n.os.to(t,{duration:.8,opacity:1,y:0,ease:"power2.inOut",delay:.2}),()=>{n.os.killTweensOf(t)}},[]),(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsx)("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-3 sm:py-6 max-w-full xl:max-w-7xl",children:(0,r.jsx)("div",{ref:e,children:(0,r.jsx)(g,{})})})})}},85127:(e,t,s)=>{"use strict";s.d(t,{A0:()=>i,BF:()=>l,Hj:()=>d,XI:()=>n,nA:()=>c,nd:()=>o});var r=s(95155);s(12115);var a=s(59434);function n(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",t),...s})})}function i(e){let{className:t,...s}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",t),...s})}function l(e){let{className:t,...s}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",t),...s})}function d(e){let{className:t,...s}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function o(e){let{className:t,...s}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function c(e){let{className:t,...s}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}}},e=>{e.O(0,[592,277,802,289,589,235,441,964,358],()=>e(e.s=77690)),_N_E=e.O()}]);