(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{467:(e,t,r)=>{"use strict";r.d(t,{r:()=>i});var s=r(95155),a=r(12115),n=r(50802),o=r(5058);n.Ay.registerPlugin(o.C);let i=()=>((0,a.useEffect)(()=>{n.Ay.to("#secound",{duration:1,scrambleText:{text:"Please Login",chars:"XO",revealDelay:.5,speed:.5,newClass:"myClass"}})},[]),(0,s.jsxs)("div",{className:"text-center font-bold mt-8",children:[(0,s.jsx)("p",{id:"first",className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl",children:"Welcome to Village"}),(0,s.jsx)("p",{id:"secound",className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl",children:"Please Login"})]}));r(35695)},1186:(e,t,r)=>{Promise.resolve().then(r.bind(r,9690))},9690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(95155),a=r(12115),n=r(35695),o=r(90221),i=r(62177),l=r(56671),c=r(68309),d=r(50802),u=r(30285),m=r(75937),x=r(62523),p=r(467),f=r(5058);d.Ay.registerPlugin(f.C);let g=c.Ik({username:c.Yj().min(3,{message:"Username must be at least 3 characters."}).max(50,{message:"Username must not exceed 50 characters."}).regex(/^[a-zA-Z0-9_]+$/,{message:"Username can only contain letters, numbers, and underscores."}),password:c.Yj().min(6,{message:"Password must be at least 6 characters."}).max(100,{message:"Password must not exceed 100 characters."})}),h=a.forwardRef((e,t)=>{let{className:r,children:n,...o}=e,i=(0,a.useRef)(null),l=t||i;return(0,s.jsx)(u.$,{ref:l,type:"submit",className:r,onMouseEnter:()=>{l&&"current"in l&&l.current&&d.Ay.to(l.current,{scale:1.07,duration:.25,ease:"power2.out"})},onMouseLeave:()=>{l&&"current"in l&&l.current&&d.Ay.to(l.current,{scale:1,duration:.25,ease:"power2.out"})},...o,children:n})});h.displayName="Gsaploginbutton";let b=()=>{let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),f=(0,i.mN)({resolver:(0,o.u)(g),defaultValues:{username:"",password:""},mode:"onBlur"}),b=(0,a.useRef)(null),v=(0,a.useRef)(null),y=(0,a.useRef)(null),w=(0,a.useRef)(null),j=(0,a.useRef)(null),N=(0,a.useRef)(null),R=(0,a.useRef)(null),k=(0,a.useRef)(null),C=(0,a.useRef)(null),O=(0,a.useRef)(null),A=(0,a.useRef)(null),I=(0,a.useRef)(null),P=(0,a.useRef)(null);async function E(e){r(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e;try{e=await t.json()}catch(e){throw Error("Login failed (".concat(t.status,")"))}let r="Login failed";throw(null==e?void 0:e.error)?r=e.error:(null==e?void 0:e.message)?r=e.message:(null==e?void 0:e.details)&&Array.isArray(e.details)?r=e.details.join(", "):429===t.status?r="Too many login attempts. Please try again later.":401===t.status?r="Invalid username or password":403===t.status&&(r="Account not verified"),Error(r)}l.oR.success("Login successful!"),S()}catch(n){let e=n instanceof Error?n.message:"Something went wrong";l.oR.error(e);let t=d.Ay.timeline(),s=window.innerWidth<480,a=window.innerWidth<640;t.to(O.current,{scale:s?1.1:a?1.15:1.2,color:"#ef4b6c",duration:.3,ease:"back.out(1.7)"}).to(O.current,{duration:.8,scrambleText:{text:"Login Fail",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",revealDelay:.1,speed:.8}},"-=0.2").set(P.current,{display:"block",opacity:0,y:s?-6:a?-8:-10},"-=0.4").to(P.current,{opacity:1,y:0,duration:.5,ease:"power2.out"}).to(P.current,{duration:.5,scrambleText:{text:"Invalid Username or Password",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",revealDelay:.05,speed:.1}},"-=0.3").to(O.current,{scale:1,duration:.4,ease:"power2.out"},"-=0.8").to(P.current,{opacity:0,y:s?-6:a?-8:-10,duration:.4,ease:"power2.inOut"},"+=3.5").set(P.current,{display:"none"}).to(O.current,{duration:.8,scrambleText:{text:"Login",chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",revealDelay:.1,speed:.8},color:"#253050"},"-=0.2"),r(!1)}}let S=()=>{var e,t,r;let s=d.Ay.timeline(),a=null==(e=R.current)?void 0:e.getBoundingClientRect(),n=null==(t=k.current)?void 0:t.getBoundingClientRect(),o=null==(r=w.current)?void 0:r.getBoundingClientRect();if(a&&n&&o){let e=(a.top+n.top)/2-a.top;s.to([O.current,A.current],{opacity:0,duration:.2,ease:"power2.inOut"}).to(C.current,{opacity:0,duration:.2,ease:"power2.inOut"},"<").to(R.current,{y:e,duration:.3,ease:"power2.inOut"},"-=0.1").to(k.current,{y:e-(n.top-a.top),duration:.3,ease:"power2.inOut"},"<").to([R.current,k.current],{opacity:0,duration:.2,ease:"power2.inOut"}).set(N.current,{display:"block",position:"absolute",top:"25%",opacity:1,zIndex:10},"<").call(()=>{d.Ay.to(I.current,{duration:1,scrambleText:{text:"Successfully!!!",chars:"YOU ARE RIGHT!!!",revealDelay:.1,speed:1}})}).call(()=>{setTimeout(()=>{u(!0)},1200)})}};return(0,a.useEffect)(()=>{c&&e.push("/dashboard")},[c,e]),(0,a.useEffect)(()=>{let e=window.innerHeight<800;try{d.Ay.set(v.current,{bottom:e?"-250px":"-350px"}),d.Ay.timeline().to(b.current,{top:"10%",duration:.8,ease:"power2.inOut"}).to(y.current,{opacity:1,duration:1,ease:"power2.inOut"},"<").to(w.current,{opacity:1,duration:1,ease:"power2.inOut"},"<").to(j.current,{opacity:1,duration:.4,ease:"power2.inOut"},"-=0.3")}catch(t){y.current&&(y.current.style.opacity="1"),w.current&&(w.current.style.opacity="1"),j.current&&(j.current.style.opacity="1"),b.current&&(b.current.style.top="10%",b.current.style.transform="translateY(-50%)"),v.current&&(v.current.style.bottom=e?"35%":"45%",v.current.style.transform="translateY(50%)")}},[]),(0,s.jsxs)("div",{className:"w-screen h-screen bg-[#4fa3f2] flex flex-col justify-center items-center overflow-hidden",children:[(0,s.jsx)("div",{ref:b,className:"absolute text-white text-4xl tracking-[2px] z-10",children:(0,s.jsx)(p.r,{})}),(0,s.jsxs)("div",{ref:v,className:"relative flex flex-col items-stretch w-full z-[5]",children:[(0,s.jsxs)("div",{ref:y,className:"opacity-0 w-full h-[120px] sm:h-[130px] md:h-[140px] bg-white flex flex-col justify-center items-center z-[2] mt-[50px] rounded-t-[22px] relative triangle-shape",children:[(0,s.jsx)("h2",{ref:O,className:"text-[#253050] m-0 text-[1.2rem] xs:text-[1.3rem] sm:text-[1.6rem] md:text-[1.8rem] lg:text-[2rem] font-black tracking-[1.5px]",children:"Login"}),(0,s.jsx)("p",{ref:P,className:"hidden text-[#ef4b6c] text-[0.7rem] sm:text-[0.75rem] md:text-[0.85rem] lg:text-[0.9rem] font-medium mt-1 sm:mt-2 text-center px-2 sm:px-3 md:px-4 leading-tight max-w-[280px] sm:max-w-[320px] md:max-w-[360px]"})]}),(0,s.jsxs)("div",{ref:w,className:"w-full h-screen bg-white rounded-[22px] flex flex-col items-center opacity-0 z-[1]",children:[(0,s.jsxs)("div",{ref:j,className:"mt-8 w-[85%] max-w-[350px] opacity-0 transition-opacity duration-200",children:[(0,s.jsx)(m.lV,{...f,children:(0,s.jsxs)("form",{onSubmit:f.handleSubmit(E),className:"space-y-6",children:[(0,s.jsx)(m.zB,{control:f.control,name:"username",render:e=>{let{field:t}=e;return(0,s.jsxs)(m.eI,{ref:R,className:"mb-3",children:[(0,s.jsx)(m.lR,{htmlFor:"username",className:"font-bold text-[#253050]",children:"Username"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(x.p,{id:"username",placeholder:"Username",...t,className:f.formState.errors.username?"border-[1.5px] border-[#ef4b6c]":""})}),(0,s.jsx)(m.C5,{className:"text-[#ef4b6c] text-[0.9rem]"})]})}}),(0,s.jsx)(m.zB,{control:f.control,name:"password",render:e=>{let{field:t}=e;return(0,s.jsxs)(m.eI,{ref:k,className:"mb-3",children:[(0,s.jsx)(m.lR,{htmlFor:"password",className:"font-bold text-[#253050]",children:"Password"}),(0,s.jsx)(m.MJ,{children:(0,s.jsx)(x.p,{id:"password",type:"password",placeholder:"••••••",...t,className:f.formState.errors.password?"border-[1.5px] border-[#ef4b6c]":""})}),(0,s.jsx)(m.C5,{className:"text-[#ef4b6c] text-[0.9rem]"})]})}}),(0,s.jsx)(h,{ref:C,type:"submit",disabled:t,className:"w-full bg-[#253050] text-white rounded-xl text-[1.1rem] py-3 shadow-[0px_6px_24px_1px_rgba(50,56,168,0.09)] font-semibold disabled:opacity-50",children:t?"Logging in...":"Login"})]})}),(0,s.jsxs)("p",{ref:A,className:"mt-10 text-center text-[#aaa] text-[0.97em]",children:["Village Management System ",(0,s.jsx)("br",{})," v.x.x"]})]}),(0,s.jsx)("div",{ref:N,className:"hidden text-center",children:(0,s.jsx)("h2",{ref:I,className:"text-2xl font-bold text-[#253050] tracking-[1.5px]"})})]})]})]})}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>i});var s=r(95155);r(12115);var a=r(99708),n=r(74466),o=r(59434);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:n,asChild:l=!1,...c}=e,d=l?a.DX:"button";return(0,s.jsx)(d,{"data-slot":"button",className:(0,o.cn)(i({variant:r,size:n,className:t})),...c})}},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(52596),a=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155);r(12115);var a=r(59434);function n(e){let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},75937:(e,t,r)=>{"use strict";r.d(t,{lV:()=>d,MJ:()=>h,zB:()=>m,eI:()=>f,lR:()=>g,C5:()=>b});var s=r(95155),a=r(12115),n=r(99708),o=r(62177),i=r(59434),l=r(40968);function c(e){let{className:t,...r}=e;return(0,s.jsx)(l.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}let d=o.Op,u=a.createContext({}),m=e=>{let{...t}=e;return(0,s.jsx)(u.Provider,{value:{name:t.name},children:(0,s.jsx)(o.xI,{...t})})},x=()=>{let e=a.useContext(u),t=a.useContext(p),{getFieldState:r}=(0,o.xW)(),s=(0,o.lN)({name:e.name}),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},p=a.createContext({});function f(e){let{className:t,...r}=e,n=a.useId();return(0,s.jsx)(p.Provider,{value:{id:n},children:(0,s.jsx)("div",{"data-slot":"form-item",className:(0,i.cn)("grid gap-2",t),...r})})}function g(e){let{className:t,...r}=e,{error:a,formItemId:n}=x();return(0,s.jsx)(c,{"data-slot":"form-label","data-error":!!a,className:(0,i.cn)("data-[error=true]:text-destructive",t),htmlFor:n,...r})}function h(e){let{...t}=e,{error:r,formItemId:a,formDescriptionId:o,formMessageId:i}=x();return(0,s.jsx)(n.DX,{"data-slot":"form-control",id:a,"aria-describedby":r?"".concat(o," ").concat(i):"".concat(o),"aria-invalid":!!r,...t})}function b(e){var t;let{className:r,...a}=e,{error:n,formMessageId:o}=x(),l=n?String(null!=(t=null==n?void 0:n.message)?t:""):a.children;return l?(0,s.jsx)("p",{"data-slot":"form-message",id:o,className:(0,i.cn)("text-destructive text-sm",r),...a,children:l}):null}}},e=>{e.O(0,[592,277,802,804,637,441,964,358],()=>e(e.s=1186)),_N_E=e.O()}]);