(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3118:(e,t,r)=>{Promise.resolve().then(r.bind(r,33792))},33792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(95155),n=r(12115);function i(){let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[a,l]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[o,h]=(0,n.useState)(!1),[c,p]=(0,n.useState)("");async function j(e){e.preventDefault(),p(""),h(!0);try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,fname:d,email:a})});if(!e.ok){var s;let t=await e.json();throw Error(null!=(s=t.error)?s:"Unknown error")}let n=await e.json();t(e=>[...e,n]),i(""),u(""),l("")}catch(e){p(e instanceof Error?e.message:"Failed to insert user")}h(!1)}return(0,n.useEffect)(()=>{fetch("/api/users").then(e=>e.json()).then(t)},[]),(0,s.jsxs)("div",{style:{margin:20},children:[(0,s.jsx)("h1",{children:"Users List"}),(0,s.jsxs)("form",{onSubmit:j,style:{marginBottom:20},children:[(0,s.jsx)("div",{children:(0,s.jsx)("input",{placeholder:"Name",value:r,onChange:e=>i(e.target.value),required:!0})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{placeholder:"Fname",value:d,onChange:e=>u(e.target.value),required:!0,min:1})}),(0,s.jsx)("div",{children:(0,s.jsx)("input",{placeholder:"Email",type:"email",value:a,onChange:e=>l(e.target.value),required:!0})}),(0,s.jsx)("button",{type:"submit",disabled:o,children:o?"Adding...":"Add User"})]}),c&&(0,s.jsx)("div",{style:{color:"red",marginBottom:10},children:c}),(0,s.jsx)("ul",{children:e.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("p",{children:e.fname}),(0,s.jsx)("p",{children:e.email})]},e.user_id))})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=3118)),_N_E=e.O()}]);