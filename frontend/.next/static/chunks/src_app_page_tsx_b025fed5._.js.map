{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/rockwell/Documents/Village_Security_project/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { UUID } from \"crypto\";\nimport React, { useState, useEffect } from \"react\";\n// import axios from \"axios\";\ntype User = {\n  user_id: UUID;\n  username:string,\n  email:string;\n  fname: string;\n  lname: string;\n  phone: string;\n  age: number;\n  role_id: UUID;\n  status: string;\n\n};\n\nexport default function UsersPage() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [username, setUsername] = useState(\"\")\n  const [email, setEmail] = useState(\"\");\n  const [fname, setFname] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  // ดึง users ทั้งหมดเมื่อโหลดหน้าเว็บ\n\n  useEffect(() => {\n    fetch(\"/api/users\") // เปลี่ยน url เป็น backend ของคุณ\n      .then((res) => res.json())\n\n      .then(setUsers);\n  }, []);\n\n  // Submit form สำหรับเพิ่ม user\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n\n    setError(\"\");\n\n    setLoading(true);\n\n    try {\n\n      const res = await fetch(\"/api/users\", {\n\n        method: \"POST\",\n\n        headers: { \"Content-Type\": \"application/json\" },\n\n        body: JSON.stringify({ username, fname, email }),\n      });\n\n      if (!res.ok) {\n        const data = await res.json();\n\n        throw new Error(data.error ?? \"Unknown error\");\n      }\n\n      const newUser = await res.json();\n\n      setUsers((prev) => [...prev, newUser]);\n\n      setUsername(\"\");\n\n      setFname(\"\");\n\n      setEmail(\"\");\n    } catch (e: unknown) {\n      setError(e instanceof Error ? e.message : \"Failed to insert user\");\n    }\n\n    setLoading(false);\n  }\n\n  return (\n    <div style={{ margin: 20 }}>\n      <h1>Users List</h1>\n\n      <form onSubmit={handleSubmit} style={{ marginBottom: 20 }}>\n        <div>\n          <input\n            placeholder=\"Name\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            required\n          />\n        </div>\n\n        <div>\n          <input\n            placeholder=\"Fname\"\n            value={fname}\n            onChange={(e) => setFname(e.target.value)}\n            required\n            min={1}\n          />\n        </div>\n\n        <div>\n          <input\n            placeholder=\"Email\"\n            type=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </div>\n\n        <button type=\"submit\" disabled={loading}>\n          {loading ? \"Adding...\" : \"Add User\"}\n        </button>\n      </form>\n\n      {error && <div style={{ color: \"red\", marginBottom: 10 }}>{error}</div>}\n\n      <ul>\n        {users.map((u) => (\n          <li key={u.user_id}>\n            <p>{u.fname}</p>\n            <p>{u.email}</p>\n\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;;;AAHA;;AAkBe,SAAS;;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,qCAAqC;IAErC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM,cAAc,kCAAkC;aACnD,IAAI;uCAAC,CAAC,MAAQ,IAAI,IAAI;sCAEtB,IAAI,CAAC;QACV;8BAAG,EAAE;IAEL,+BAA+B;IAE/B,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAEhB,SAAS;QAET,WAAW;QAEX,IAAI;YAEF,MAAM,MAAM,MAAM,MAAM,cAAc;gBAEpC,QAAQ;gBAER,SAAS;oBAAE,gBAAgB;gBAAmB;gBAE9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAU;oBAAO;gBAAM;YAChD;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,OAAO,MAAM,IAAI,IAAI;oBAEX;gBAAhB,MAAM,IAAI,MAAM,CAAA,cAAA,KAAK,KAAK,cAAV,yBAAA,cAAc;YAChC;YAEA,MAAM,UAAU,MAAM,IAAI,IAAI;YAE9B,SAAS,CAAC,OAAS;uBAAI;oBAAM;iBAAQ;YAErC,YAAY;YAEZ,SAAS;YAET,SAAS;QACX,EAAE,OAAO,GAAY;YACnB,SAAS,aAAa,QAAQ,EAAE,OAAO,GAAG;QAC5C;QAEA,WAAW;IACb;IAEA,qBACE,6LAAC;QAAI,OAAO;YAAE,QAAQ;QAAG;;0BACvB,6LAAC;0BAAG;;;;;;0BAEJ,6LAAC;gBAAK,UAAU;gBAAc,OAAO;oBAAE,cAAc;gBAAG;;kCACtD,6LAAC;kCACC,cAAA,6LAAC;4BACC,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,QAAQ;;;;;;;;;;;kCAIZ,6LAAC;kCACC,cAAA,6LAAC;4BACC,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,QAAQ;4BACR,KAAK;;;;;;;;;;;kCAIT,6LAAC;kCACC,cAAA,6LAAC;4BACC,aAAY;4BACZ,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;4BACxC,QAAQ;;;;;;;;;;;kCAIZ,6LAAC;wBAAO,MAAK;wBAAS,UAAU;kCAC7B,UAAU,cAAc;;;;;;;;;;;;YAI5B,uBAAS,6LAAC;gBAAI,OAAO;oBAAE,OAAO;oBAAO,cAAc;gBAAG;0BAAI;;;;;;0BAE3D,6LAAC;0BACE,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;;0CACC,6LAAC;0CAAG,EAAE,KAAK;;;;;;0CACX,6LAAC;0CAAG,EAAE,KAAK;;;;;;;uBAFJ,EAAE,OAAO;;;;;;;;;;;;;;;;AAS5B;GAhHwB;KAAA","debugId":null}}]
}